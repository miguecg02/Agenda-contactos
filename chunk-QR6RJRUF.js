import{d as T}from"./chunk-NJT4JHNX.js";import{d as V,e as P,g as L,h as U,i as j,j as q,k as z}from"./chunk-IKPN3UYD.js";import{C as A,E as B,W as O,b as C,c as b,d as M,e as N,f as D,h as c,j as w,k as x,l as E,o as _,p as y,r as F,t as k,u as R,v as I}from"./chunk-QO4XLJ5Y.js";import{Cb as S,Da as g,F as a,Ta as r,W as s,ca as d,db as G,eb as h,jb as v,pa as l,qa as f,ua as p,va as i,wa as o,xa as u}from"./chunk-7WGGR3LD.js";var H={name:"",id:0,contacts:[]};function K(n,t){n&1&&(i(0,"h2",0),r(1,"Editar grupo"),o())}function Q(n,t){n&1&&(i(0,"h2",0),r(1,"Nuevo grupo"),o())}var J=class n{groupsService=a(T);router=a(S);snackBarService=a(O);dialogRef=a(V);data=a(P);id=v();group=G(()=>{if(this.data)return this.data;if(this.id())return this.groupsService.groups.value()?.find(t=>t.id==this.id())});precompletarFormulario=h(()=>{this.group()&&(this.form.controls.name.setValue(this.group().name||""),this.form.controls.description.setValue(this.group().description||""))});async save(){let t=this.group()||H;if(t.name=this.form.controls.name.value||"",t.description=this.form.controls.description.value||"",!this.group()||!this.group().id){let e=await this.groupsService.createGroup(t);e.success&&e.data?(this.snackBarService.openSnackbarSuccess(e.message),this.router.navigate(["/groups",e.data.id]),this.dialogRef&&this.dialogRef.close(!0)):this.snackBarService.openSnackbarError(e.message)}else{let e=await this.groupsService.updateGroup(t);if(e.success&&e.data){this.snackBarService.openSnackbarSuccess(e.message),this.groupsService.updateLocalGroup(e.data),this.dialogRef&&this.dialogRef.close(!0);return}this.snackBarService.openSnackbarError(e.message)}}form=new D({name:new c("",b.required),description:new c("")});static \u0275fac=function(e){return new(e||n)};static \u0275cmp=d({type:n,selectors:[["app-group-new-edit"]],inputs:{id:[1,"id"]},decls:17,vars:4,consts:[["mat-dialog-title",""],[3,"ngSubmit","formGroup"],[1,"flex-column"],["matInput","","type","text","name","name","id","name","formControlName","name",3,"autocomplete"],["matInput","","type","text","name","text","id","text","formControlName","description"],["mat-button","","matDialogClose","",1,"error"],["mat-button","","type","submit",1,"tertiary",3,"disabled"]],template:function(e,m){e&1&&(l(0,K,2,0,"h2",0)(1,Q,2,0,"h2",0),i(2,"form",1),g("ngSubmit",function(){return m.save()}),i(3,"mat-dialog-content",2)(4,"mat-form-field")(5,"mat-label"),r(6,"Nombre"),o(),u(7,"input",3),o(),i(8,"mat-form-field")(9,"mat-label"),r(10,"Descripcion"),o(),u(11,"textarea",4),o()(),i(12,"mat-dialog-actions")(13,"button",5),r(14,"Cancelar"),o(),i(15,"button",6),r(16,"Guardar"),o()()()),e&2&&(f(m.group()?0:1),s(2),p("formGroup",m.form),s(5),p("autocomplete","name"),s(8),p("disabled",m.form.invalid))},dependencies:[_,w,C,M,N,x,E,k,F,y,I,R,z,L,U,q,j,B,A],styles:["textarea[_ngcontent-%COMP%]{min-width:500px;field-sizing:content}"]})};export{J as a};
