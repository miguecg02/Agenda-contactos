import{c as L,d as P,e as q,g as z,h as j,i as H,j as J,k as K}from"./chunk-IKPN3UYD.js";import{C as U,E as B,W as G,b as y,c as m,d as w,e as M,f as D,h as r,j as I,k as _,l as F,o as O,p as A,r as T,t as V,u as k,v as R}from"./chunk-QO4XLJ5Y.js";import{Cb as x,Da as v,F as l,Ta as a,W as p,a as d,b as g,ca as C,db as b,eb as S,jb as E,pa as N,qa as h,ua as f,va as n,wa as t,xa as o}from"./chunk-7WGGR3LD.js";var u={firstName:"",lastName:"",phone:""},Z=g(d({},u),{groupIds:[],id:0});function W(s,e){s&1&&(n(0,"h2",0),a(1,"Editar contacto"),t())}function X(s,e){s&1&&(n(0,"h2",0),a(1,"Nuevo contacto"),t())}var Q=class s{contactsService=l(L);router=l(x);snackBarService=l(G);dialogRef=l(P);data=l(q);id=E();contact=b(()=>{if(this.data)return this.data;if(this.id())return this.contactsService.contacts.value()?.find(e=>e.id==this.id())});precompletarFormulario=S(()=>{this.contact()&&(this.form.controls.firstName.setValue(this.contact().firstName||""),this.form.controls.lastName.setValue(this.contact().lastName||""),this.form.controls.phone.setValue(this.contact().phone||""),this.form.controls.company.setValue(this.contact().company||""))});async save(){let e=this.contact()||d({},u);if(e.firstName=this.form.controls.firstName.value||"",e.lastName=this.form.controls.lastName.value||"",e.phone=this.form.controls.phone.value||"",e.company=this.form.controls.company.value||"",e.description=this.form.controls.description.value||"",e.address=this.form.controls.address.value||"",e.email=this.form.controls.email.value||"",e.imageUrl=this.form.controls.imageUrl.value||"",e.id){let i=await this.contactsService.updateContact(e);i.success&&i.data?(this.snackBarService.openSnackbarSuccess(i.message),this.dialogRef&&this.dialogRef.close()):this.snackBarService.openSnackbarError(i.message)}else{let i=await this.contactsService.createContact(e);i.success&&i.data?(this.snackBarService.openSnackbarSuccess(i.message),this.router.navigate(["/contacts",i.data.id]),this.dialogRef&&this.dialogRef.close()):this.snackBarService.openSnackbarError(i.message)}this.dialogRef?.close()}form=new D({firstName:new r("",m.required),lastName:new r(""),phone:new r("",[m.required,m.minLength(5)]),company:new r(""),address:new r("",m.minLength(5)),email:new r("",m.email),description:new r(""),imageUrl:new r("",m.minLength(10))});static \u0275fac=function(i){return new(i||s)};static \u0275cmp=C({type:s,selectors:[["app-contact-new-edit"]],inputs:{id:[1,"id"]},decls:41,vars:3,consts:[["mat-dialog-title",""],[3,"ngSubmit","formGroup"],["matInput","","type","text","name","firstName","id","firstName","autocomplete","given-name","formControlName","firstName"],["matInput","","type","text","name","lastName","id","lastName","autocomplete","family-name","formControlName","lastName"],["matInput","","type","text","name","phone","id","phone","autocomplete","tel","formControlName","phone"],["matInput","","type","text","name","company","id","company","autocomplete","organization","formControlName","company"],["matInput","","type","text","name","address","id","address","autocomplete","address","formControlName","address"],["matInput","","type","email","name","email","id","email","autocomplete","current-email","formControlName","email"],["matInput","","type","text","name","imageUrl","id","imageUrl","formControlName","imageUrl"],["matInput","","type","text","name","text","id","text","formControlName","description"],["mat-button","","matDialogClose","",1,"error"],["mat-button","",1,"tertiary",3,"disabled"]],template:function(i,c){i&1&&(N(0,W,2,0,"h2",0)(1,X,2,0,"h2",0),n(2,"form",1),v("ngSubmit",function(){return c.save()}),n(3,"mat-dialog-content")(4,"mat-form-field")(5,"mat-label"),a(6,"Nombre"),t(),o(7,"input",2),t(),n(8,"mat-form-field")(9,"mat-label"),a(10,"Apellido"),t(),o(11,"input",3),t(),n(12,"mat-form-field")(13,"mat-label"),a(14,"Tel\xE9fono"),t(),o(15,"input",4),t(),n(16,"mat-form-field")(17,"mat-label"),a(18,"Empresa"),t(),o(19,"input",5),t(),n(20,"mat-form-field")(21,"mat-label"),a(22,"Direcci\xF3n"),t(),o(23,"input",6),t(),n(24,"mat-form-field")(25,"mat-label"),a(26,"Correo electr\xF3nico"),t(),o(27,"input",7),t(),n(28,"mat-form-field")(29,"mat-label"),a(30,"Imagen (URL)"),t(),o(31,"input",8),t(),n(32,"mat-form-field")(33,"mat-label"),a(34,"Descripcion"),t(),o(35,"textarea",9),t()(),n(36,"mat-dialog-actions")(37,"button",10),a(38,"Cancelar"),t(),n(39,"button",11),a(40,"Guardar"),t()()()),i&2&&(h(c.contact()?0:1),p(2),f("formGroup",c.form),p(37),f("disabled",c.form.invalid))},dependencies:[O,I,y,w,M,_,F,V,T,A,R,k,B,U,K,z,j,J,H],styles:["textarea[_ngcontent-%COMP%]{min-width:500px;field-sizing:content}mat-dialog-content[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:0 20px}mat-form-field[_ngcontent-%COMP%]{min-width:200px}@media (width < 500px){mat-dialog-content[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})};export{Q as a};
